<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><script src="js/jquery-1.12.4.min.js"></script><script src="js/template-native.js"></script><script id="templete" type="text/html"> <% for(var i = 0;i < comments.length;i++){ %> <li uid="<%= comments[i].id %>">
                <p class="floor"><%= comments[i].id %></a>楼<input type="button" value="删除" class="delete"></p>
                <p class="fauthor">层主：<span><%= comments[i].username %></span></p>
                <p class="content"><%= comments[i].content %></p>
            </li> <% } %> </script></head><body><div class="box"><div class="up"><h2>upupup</h2><p class="lauthor">楼主：张三</p><p class="text">祝你生日快乐，快快乐！</p></div><div class="reply"><h3>发表评论</h3><p>用户名：<input type="text" class="username"></p><textarea name="" id="" cols="30" rows="10" class="usertext"></textarea> <input type="button" value="发布" class="btn"></div><div class="comment"><ul class="cmtitem"></ul></div></div><script>const $username=$(".username"),$usertext=$(".usertext"),$btn=$(".btn"),$cmtitem=$(".cmtitem");function deleteData(){$(".delete").click((function(){const t=$(this).parents("li"),e=t.attr("uid");$.ajax({url:"http://localhost:3000/comments/"+e,type:"DELETE"}),t.remove()}))}$.get("http://localhost:3000/db",(t=>{console.log(t),$cmtitem.html(template("templete",t)),deleteData()})),$btn.click((()=>{const t=$username.val(),e=$usertext.val();$.post("http://localhost:3000/comments",{username:t,content:e},(t=>{console.log(t),$cmtitem.append(template("templete",{comments:[t]})),deleteData()})),$username.val(""),$usertext.val("")}))</script></body></html>